webpackJsonp([4],{745:function(t,e,n){n(779);var a=n(20)(n(757),n(791),null,null);t.exports=a.exports},748:function(t,e,n){"use strict";function a(t,e){var n,a,r=0,l=0;try{r=t.toString().split(".")[1].length}catch(t){}try{l=e.toString().split(".")[1].length}catch(t){}return n=Number(t.toString().replace(".","")),a=Number(e.toString().replace(".","")),0==a?1/0:n/a*Math.pow(10,l-r)}function r(t,e){var n=0,a=t.toString(),r=e.toString();try{n+=a.split(".")[1].length}catch(t){}try{n+=r.split(".")[1].length}catch(t){}return Number(a.replace(".",""))*Number(r.replace(".",""))/Math.pow(10,n)}function l(t,e){var n,a,r;try{n=t.toString().split(".")[1].length}catch(t){n=0}try{a=e.toString().split(".")[1].length}catch(t){a=0}return r=Math.pow(10,Math.max(n,a)),(t*r+e*r)/r}function i(t,e){var n,a,r,l;try{n=t.toString().split(".")[1].length}catch(t){n=0}try{a=e.toString().split(".")[1].length}catch(t){a=0}return r=Math.pow(10,Math.max(n,a)),l=n>=a?n:a,((e*r-t*r)/r).toFixed(l)}Object.defineProperty(e,"__esModule",{value:!0}),Number.prototype.add=function(t){return l(t,this)},Number.prototype.sub=function(t){return i(t,this)},Number.prototype.mul=function(t){return r(t,this)},Number.prototype.div=function(t){return a(this,t)},e.accDiv=a,e.accMul=r,e.accAdd=l,e.accSub=i},757:function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(157),l=a(r),i=n(156),o=a(i);n(748);e.default={data:function(){return{filters:{},orders:[],pageNum:1,pageSize:100,total:0,addUserinfo:{quantity:0,unit_price:0},addDialog:!1,editDialog:!1,editUserinfo:{},row:{},remittance:[],remit:[]}},created:function(){this.getOrders()},methods:{handleSizeChange:function(t){this.pageSize=t,this.getOrders()},handleCurrentChange:function(t){this.page=t,this.getOrders()},getOrders:function(){var t=this;return(0,o.default)(l.default.mark(function e(){var n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios("Settlements/",{params:{search:t.filters.name,page:t.page,page_size:t.pageSize}});case 2:n=e.sent,console.log(n),t.orders=n.data,t.total=n.count;case 6:case"end":return e.stop()}},e,t)}))()},handleEdit:function(t,e){var n=this;return(0,o.default)(l.default.mark(function t(){return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n.row=e,n.getRemit(),n.editDialog=!0;case 3:case"end":return t.stop()}},t,n)}))()},subRemit:function(t){var e=this;return(0,o.default)(l.default.mark(function n(){var a;return l.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$axios.post("Remit/",t);case 2:a=n.sent,e.getRemit(),e.$message.success(a.message);case 5:case"end":return n.stop()}},n,e)}))()},getRemit:function(){var t=this;return(0,o.default)(l.default.mark(function e(){var n,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios("Remit/?settlement="+t.row.id);case 2:n=e.sent,a=n.data,t.remit=a;case 5:case"end":return e.stop()}},e,t)}))()}}}},770:function(t,e,n){e=t.exports=n(738)(),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"SettlementBill.vue",sourceRoot:""}])},779:function(t,e,n){var a=n(770);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n(739)("8eacf7e6",a,!0)},791:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[n("el-form",{attrs:{inline:!0,model:t.filters}},[n("el-form-item",[n("el-input",{attrs:{placeholder:"用户名称"},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getOrders.apply(null,arguments)}},model:{value:t.filters.name,callback:function(e){t.$set(t.filters,"name",e)},expression:"filters.name"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.getOrders}},[t._v("查询")])],1)],1)],1),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.orders,"highlight-current-row":""}},[n("el-table-column",{attrs:{prop:"id",label:"结算单id",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{prop:"settlement_method",label:"结算方式",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{prop:"receiving_account",label:"收款账号",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{prop:"actual_settlement_fee",label:"实际结算金额",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{label:"结算保单",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.insurancepolicy_set,function(e){return n("div",{key:e.id},[t._v("\n          "+t._s(e.jiaoqiang_insure_no)+"  "+t._s(e.chanel_rate_id.chanel)+" \n        ")])})}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"note",label:"备注",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{label:"操作",width:"150",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{on:{click:function(n){return t.handleEdit(e.$index,e.row)}}},[t._v("新增打款")])]}}])})],1),t._v(" "),n("el-col",{staticClass:"toolbar",attrs:{span:24}},[n("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","page-size":t.pageSize,total:t.total},on:{"current-change":t.handleCurrentChange}}),t._v(" "),n("el-pagination",{attrs:{"page-sizes":[100,200,300,400],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),n("el-dialog",{attrs:{title:"新增打款",visible:t.editDialog},on:{"update:visible":function(e){t.editDialog=e}}},[n("el-form",{staticClass:"demo-form-inline",attrs:{model:t.row,"label-width":"100px",inline:!0}},[n("el-form-item",{attrs:{label:"结算方式"}},[t._v("\n        "+t._s(t.row.settlement_method)+"\n      ")]),t._v(" "),n("el-form-item",{attrs:{label:"收款账号"}},[t._v("\n        "+t._s(t.row.receiving_account)+"\n      ")]),t._v(" "),n("el-form-item",{attrs:{label:"实际结算金额"}},[t._v("\n        "+t._s(t.row.actual_settlement_fee)+"\n      ")]),t._v(" "),n("el-form-item",{attrs:{label:"结算日期"}},[t._v("\n        "+t._s(t.row.settlement_date)+"\n      ")])],1),t._v(" "),n("section",[n("h3",[t._v("打款明细")]),t._v(" "),t._l(t.remit,function(e,a){return n("el-form",{key:a,staticClass:"demo-form-inline",attrs:{"label-width":"100px",inline:!0}},[n("el-form-item",{attrs:{label:"支付方式"}},[t._v("\n          "+t._s(e.mode_of_payment)+"\n        ")]),t._v(" "),n("el-form-item",{attrs:{label:"支付金额"}},[t._v("\n          "+t._s(e.amount)+" 元\n        ")]),t._v(" "),n("el-form-item",{attrs:{label:"支付账户名"}},[t._v("\n          "+t._s(e.acount)+"\n        ")]),t._v(" "),n("el-form-item",{attrs:{label:"支付账户尾号"}},[t._v("\n          "+t._s(e.acount_tail)+"\n        ")]),t._v(" "),n("el-form-item",{attrs:{label:"操作时间"}},[t._v("\n          "+t._s(e.create_time)+"\n        ")])],1)})],2),t._v(" "),n("section",[n("el-button",{on:{click:function(e){return t.remittance.push({settlement:t.row.id})}}},[t._v("新增打款")]),t._v(" "),t._l(t.remittance,function(e,a){return n("el-form",{key:a,staticClass:"demo-form-inline",attrs:{"label-width":"180px",inline:!0}},[n("el-form-item",{attrs:{label:"支付方式"}},[n("el-input",{model:{value:e.mode_of_payment,callback:function(n){t.$set(e,"mode_of_payment",n)},expression:"remit.mode_of_payment"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"支付金额"}},[n("el-input",{attrs:{type:"number"},model:{value:e.amount,callback:function(n){t.$set(e,"amount",n)},expression:"remit.amount"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"支付账户名"}},[n("el-input",{model:{value:e.acount,callback:function(n){t.$set(e,"acount",n)},expression:"remit.acount"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"支付账户尾号"}},[n("el-input",{model:{value:e.acount_tail,callback:function(n){t.$set(e,"acount_tail",n)},expression:"remit.acount_tail"}})],1),t._v(" "),n("el-button",{on:{click:function(n){return t.subRemit(e)}}},[t._v("提交打款明细")])],1)})],2),t._v(" "),n("h3",[t._v("结算保单")]),t._v(" "),n("el-collapse",t._l(t.row.insurancepolicy_set,function(e){return n("el-collapse-item",{key:e.id,attrs:{name:e.id,title:"保单号"+e.jiaoqiang_insurance_no}},[n("div",[t._v(t._s(e.jiaoqiang_insurance_no))]),t._v(" "),n("div",[t._v(t._s(e.applicant))])])}),1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.editDialog=!1}}},[t._v("取 消")])],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=4.ca38e5d586c79515fe91.js.map